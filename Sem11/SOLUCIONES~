###########################
###########	SOLUCION EJ1
#####################

A. Mediante una operación de SQL se quiere volver a calcular y almacenar el valor correcto del índice académico de los estudiantes. Sólo
se consideran cursos con estado ‘APROBADO’ o ‘REPROBADO’. Para mostrar que se hizo bien la operación, luego de la misma ejecute
la consulta: SELECT 'despues' AS momento, carnet, indice FROM ESTUDIANTE;

UPDATE ESTUDIANTE
SET indice = (
			SELECT SUM(a.creditos*c.nota)/SUM(a.creditos)
			FROM ASIGNATURA a, CURSA c
			WHERE 
				c.carnet = carnet AND 
				a.codasig = c.codasig AND 
				(c.estado = 'APROBADO' OR 
					c.estado = 'REPROBADO')
);

 momento | carnet  | indice 
---------+---------+--------
 despues | 9711111 |   1.80
 despues | 9722222 |   3.20
 despues | 9833333 |   3.25
 despues | 9944444 |   3.00
 despues | 0055555 |   5.00
 despues | 0066666 |   2.00
 despues | 9777777 |   1.96
 despues | 9788888 |   2.87
 despues | 9899999 |   3.80
 despues | 9911122 |   1.00
 despues | 0022333 |   3.00
 despues | 0033444 |   5.00
 despues | 9712345 |   2.13
 despues | 9723456 |   2.86
 despues | 9834567 |   2.00
 despues | 9945678 |   1.00
 despues | 0056789 |   2.50
 despues | 0067890 |   3.50
 despues | 9778901 |   2.14
 despues | 9789012 |   3.21
 despues | 9890123 |   1.83
 despues | 9901236 |   2.50
 despues | 0077889 |   2.00
 despues | 0088999 |   3.00
(24 rows)



